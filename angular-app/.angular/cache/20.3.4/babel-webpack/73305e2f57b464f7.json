{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Chart, registerables } from 'chart.js';\nimport { BaseChartDirective } from 'ng2-charts';\nChart.register(...registerables);\nlet ErrorAnalysisComponent = class ErrorAnalysisComponent {\n  constructor() {\n    this.dateRange = 'all';\n    // Pareto reasons\n    this.reasons = ['Low OCR Quality', 'Missing Field', 'Wrong Mapping', 'Classifier Mismatch', 'Timeout'];\n    this.counts = [220, 140, 80, 60, 30];\n    this.cumPct = (() => {\n      const total = 220 + 140 + 80 + 60 + 30;\n      let acc = 0;\n      return [220, 140, 80, 60, 30].map(v => Math.round((acc += v) / total * 100));\n    })();\n    this.paretoOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      scales: {\n        pctAxis: {\n          position: 'right',\n          beginAtZero: true,\n          max: 100\n        }\n      },\n      plugins: {\n        legend: {\n          position: 'top'\n        }\n      }\n    };\n    // Errors by stage\n    this.stageLabels = ['Ingest', 'Classify', 'Extract', 'Validate'];\n    this.stageCounts = [120, 90, 150, 70];\n    this.stageOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.topReasons = [{\n      reason: 'Low OCR Quality',\n      count: 220,\n      pct: 44\n    }, {\n      reason: 'Missing Field',\n      count: 140,\n      pct: 28\n    }, {\n      reason: 'Wrong Mapping',\n      count: 80,\n      pct: 16\n    }];\n    this.recentEvents = [{\n      time: '2025-10-18 12:05',\n      project: 'Invoice DU',\n      document: 'PO110000.pdf',\n      reason: 'Low OCR Quality'\n    }, {\n      time: '2025-10-18 11:58',\n      project: 'PO Extractor',\n      document: 'PO1299488.pdf',\n      reason: 'Missing Field'\n    }, {\n      time: '2025-10-18 11:22',\n      project: 'Receipt Classifier',\n      document: 'POT182209.pdf',\n      reason: 'Classifier Mismatch'\n    }];\n  }\n  get paretoData() {\n    return {\n      labels: this.reasons,\n      datasets: [{\n        label: 'Count',\n        data: this.counts,\n        backgroundColor: '#ef4444'\n      }, {\n        label: 'Cum %',\n        data: this.cumPct,\n        type: 'line',\n        borderColor: '#3b82f6',\n        yAxisID: 'pctAxis'\n      }]\n    };\n  }\n  get stageData() {\n    return {\n      labels: this.stageLabels,\n      datasets: [{\n        data: this.stageCounts,\n        backgroundColor: ['#0ea5e9', '#8b5cf6', '#f59e0b', '#ef4444']\n      }]\n    };\n  }\n};\nErrorAnalysisComponent = __decorate([Component({\n  selector: 'error-analysis',\n  standalone: true,\n  imports: [CommonModule, BaseChartDirective, FormsModule],\n  template: `\n    <section id=\"error-analysis\" class=\"view\" aria-labelledby=\"error-title\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <h1 id=\"error-title\" class=\"text-2xl font-bold\">Error Analysis</h1>\n        <div class=\"flex items-center gap-2\">\n          <label class=\"text-sm text-slate-500 mr-2\">Range</label>\n          <select [(ngModel)]=\"dateRange\" class=\"px-2 py-1 border rounded\">\n            <option value=\"all\">All</option>\n            <option value=\"1d\">Last 1 day</option>\n            <option value=\"30d\">Last 30 days</option>\n            <option value=\"60d\">Last 60 days</option>\n            <option value=\"custom\">Custom Range</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4\">\n        <div class=\"rounded-2xl bg-white p-4\">\n          <h3 class=\"font-semibold mb-2\">Error Pareto (80/20)</h3>\n          <div class=\"h-48 border rounded-md p-3\">\n            <canvas baseChart\n              [data]=\"paretoData\"\n              [options]=\"paretoOptions\"\n              [type]=\"'bar'\"\n              style=\"width:100%;height:100%;display:block;\"\n            ></canvas>\n          </div>\n        </div>\n\n        <div class=\"rounded-2xl bg-white p-4\">\n          <h3 class=\"font-semibold mb-2\">Errors by Stage</h3>\n          <div class=\"h-48 border rounded-md p-3\">\n            <canvas baseChart\n              [data]=\"stageData\"\n              [options]=\"stageOptions\"\n              [type]=\"'doughnut'\"\n              style=\"width:100%;height:100%;display:block;\"\n            ></canvas>\n          </div>\n        </div>\n\n        <div class=\"rounded-2xl bg-white p-4\">\n          <h3 class=\"font-semibold mb-2\">Top Error Reasons</h3>\n          <ul class=\"space-y-2\">\n            <li *ngFor=\"let r of topReasons\" class=\"flex items-center justify-between p-2 bg-slate-50 rounded\">\n              <div>\n                <div class=\"font-medium\">{{ r.reason }}</div>\n                <div class=\"text-xs text-slate-500\">{{ r.count }} errors</div>\n              </div>\n              <div class=\"text-sm text-slate-600\">{{ r.pct }}%</div>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <!-- Recent Error Events -->\n      <div class=\"rounded-2xl bg-white p-4\">\n        <h3 class=\"font-semibold mb-2\">Recent Error Events</h3>\n        <div class=\"overflow-auto\">\n          <table class=\"w-full text-sm\">\n            <thead class=\"text-left text-slate-500 bg-slate-50 border-b\">\n              <tr>\n                <th class=\"py-2 px-3\">Time</th>\n                <th class=\"py-2 px-3\">Project</th>\n                <th class=\"py-2 px-3\">Document</th>\n                <th class=\"py-2 px-3\">Reason</th>\n                <th class=\"py-2 px-3\">Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr *ngFor=\"let e of recentEvents\" class=\"odd:bg-white even:bg-slate-50 hover:bg-slate-100\">\n                <td class=\"py-2 px-3\">{{ e.time }}</td>\n                <td class=\"py-2 px-3\">{{ e.project }}</td>\n                <td class=\"py-2 px-3\">{{ e.document }}</td>\n                <td class=\"py-2 px-3\">{{ e.reason }}</td>\n                <td class=\"py-2 px-3 text-right\"><button class=\"inline-flex items-center gap-2 px-3 py-1 rounded bg-slate-800 text-white hover:bg-slate-700\">Open</button></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </section>\n  `\n})], ErrorAnalysisComponent);\nexport { ErrorAnalysisComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}