{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/My PC/Documents/Websites/PA/AP-UI/angular-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ElementRef } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"pdfCanvas\"];\nconst _c1 = [\"highlightCanvas\"];\nconst _c2 = [\"pdfWrapper\"];\nconst _c3 = a0 => ({\n  \"background-color\": a0\n});\nconst _c4 = (a0, a1, a2) => ({\n  \"text-red-500\": a0,\n  \"text-yellow-600\": a1,\n  \"text-green-600\": a2\n});\nfunction ClassificationOverviewComponent_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(status_r2);\n  }\n}\nfunction ClassificationOverviewComponent_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 35);\n    i0.ɵɵlistener(\"click\", function ClassificationOverviewComponent_li_18_Template_li_click_0_listener() {\n      const i_r4 = i0.ɵɵrestoreView(_r3).index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.selectPdf(i_r4));\n    });\n    i0.ɵɵelementStart(1, \"div\", 36);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 37);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 38);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const doc_r6 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"bg-indigo-100\", i_r4 === ctx_r4.currentIndex)(\"font-semibold\", i_r4 === ctx_r4.currentIndex);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.getFileName(doc_r6.file));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doc_r6.project);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(8, _c4, doc_r6.validationStatus === \"Needs Validation\", doc_r6.validationStatus === \"Missing Fields\", doc_r6.validationStatus === \"Complete\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", doc_r6.validationStatus, \" \");\n  }\n}\nfunction ClassificationOverviewComponent_li_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 39);\n    i0.ɵɵtext(1, \" No files found \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ClassificationOverviewComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function ClassificationOverviewComponent_div_38_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.submitClassification());\n    });\n    i0.ɵɵtext(2, \" Submit Classification \");\n    i0.ɵɵelementEnd()();\n  }\n}\npdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\nexport let ClassificationOverviewComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class ClassificationOverviewComponent {\n    constructor() {\n      this.searchQuery = '';\n      this.selectedStatus = '';\n      this.statuses = ['Needs Validation', 'Complete'];\n      this.zoomLevel = 1.0;\n      this.baseScale = 1;\n      this.baseWidth = 550;\n      this.currentIndex = 0;\n      this.documents = [{\n        project: 'Invoice Processing',\n        validationStatus: 'Needs Validation',\n        confidence: 93,\n        file: 'assets/pdfs/POT182209.pdf'\n      }, {\n        project: 'Payments & Disbursements',\n        validationStatus: 'Needs Validation',\n        confidence: 81,\n        file: 'assets/pdfs/PO1299488.pdf'\n      }, {\n        project: 'Vendor Management',\n        validationStatus: 'Complete',\n        confidence: 99,\n        file: 'assets/pdfs/PO110000.pdf'\n      }];\n    }\n    get filteredDocuments() {\n      const q = this.searchQuery.trim().toLowerCase();\n      return this.documents.filter(doc => {\n        const matchesSearch = this.getFileName(doc.file).toLowerCase().includes(q);\n        const matchesStatus = this.selectedStatus ? doc.validationStatus === this.selectedStatus : true;\n        return matchesSearch && matchesStatus;\n      });\n    }\n    get currentDoc() {\n      return this.filteredDocuments[this.currentIndex] || this.filteredDocuments[0];\n    }\n    ngAfterViewInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.loadPdf(_this.currentDoc.file);\n      })();\n    }\n    selectPdf(index) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.currentIndex = index;\n        _this2.zoomLevel = 1.0;\n        yield _this2.loadPdf(_this2.currentDoc.file);\n      })();\n    }\n    loadPdf(url) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const loadingTask = pdfjsLib.getDocument(url);\n        _this3.pdfDoc = yield loadingTask.promise;\n        const page = yield _this3.pdfDoc.getPage(1);\n        const unscaledViewport = page.getViewport({\n          scale: 1\n        });\n        _this3.baseScale = _this3.baseWidth / unscaledViewport.width;\n        yield _this3.renderPage();\n      })();\n    }\n    renderPage() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        const page = yield _this4.pdfDoc.getPage(1);\n        const viewport = page.getViewport({\n          scale: _this4.baseScale\n        });\n        const canvas = _this4.pdfCanvas.nativeElement;\n        const ctx = canvas.getContext('2d');\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n        const highlight = _this4.highlightCanvas.nativeElement;\n        highlight.width = viewport.width;\n        highlight.height = viewport.height;\n        yield page.render({\n          canvasContext: ctx,\n          viewport\n        }).promise;\n        _this4.applyZoomTransform();\n      })();\n    }\n    applyZoomTransform() {\n      if (this.pdfWrapper?.nativeElement) {\n        this.pdfWrapper.nativeElement.style.transform = `scale(${this.zoomLevel})`;\n      }\n    }\n    zoomIn() {\n      this.zoomLevel = Math.min(this.zoomLevel + 0.1, 3);\n      this.applyZoomTransform();\n    }\n    zoomOut() {\n      this.zoomLevel = Math.max(this.zoomLevel - 0.1, 0.5);\n      this.applyZoomTransform();\n    }\n    submitClassification() {\n      this.currentDoc.validationStatus = 'Complete';\n    }\n    getConfidenceColor(conf) {\n      if (conf >= 95) return '#22c55e'; // green\n      if (conf >= 80) return '#eab308'; // yellow\n      return '#ef4444'; // red\n    }\n    getFileName(path) {\n      return path.split('/').pop() || '';\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function ClassificationOverviewComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ClassificationOverviewComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ClassificationOverviewComponent,\n      selectors: [[\"classification-overview\"]],\n      viewQuery: function ClassificationOverviewComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n          i0.ɵɵviewQuery(_c2, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pdfCanvas = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.highlightCanvas = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pdfWrapper = _t.first);\n        }\n      },\n      decls: 55,\n      vars: 15,\n      consts: [[\"pdfWrapper\", \"\"], [\"pdfCanvas\", \"\"], [\"highlightCanvas\", \"\"], [\"id\", \"classification-overview\", \"aria-labelledby\", \"classov-title\", 1, \"view\", \"active\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-4\"], [\"id\", \"classov-title\", 1, \"text-2xl\", \"font-bold\"], [1, \"flex\", \"items-center\", \"gap-3\"], [1, \"px-3\", \"py-2\", \"rounded-xl\", \"border\", \"border-slate-300\", \"text-sm\", \"bg-white\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [4, \"ngFor\", \"ngForOf\"], [1, \"relative\"], [\"type\", \"text\", \"placeholder\", \"Search file...\", 1, \"pl-8\", \"pr-3\", \"py-2\", \"rounded-xl\", \"border\", \"border-slate-300\", \"text-sm\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-indigo-400\", 3, \"ngModelChange\", \"ngModel\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"w-4\", \"h-4\", \"text-slate-400\", \"absolute\", \"left-2.5\", \"top-2.5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M21 21l-4.35-4.35m1.85-5.15a7 7 0 11-14 0 7 7 0 0114 0z\"], [1, \"rounded-2xl\", \"bg-white\", \"p-5\", \"shadow-sm\", \"border\", \"border-slate-200\", \"flex\", \"gap-5\", \"overflow-hidden\", \"w-full\", \"box-border\"], [1, \"w-[260px]\", \"flex-shrink-0\", \"border\", \"border-slate-200\", \"rounded-xl\", \"bg-slate-50\", \"overflow-y-auto\", \"max-h-[800px]\"], [1, \"p-3\", \"border-b\", \"bg-slate-100\", \"font-semibold\", \"text-slate-700\", \"text-sm\"], [\"class\", \"cursor-pointer border-b hover:bg-indigo-50 px-4 py-3 text-sm transition\", 3, \"bg-indigo-100\", \"font-semibold\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center py-4 text-slate-500 text-sm\", 4, \"ngIf\"], [1, \"flex-1\", \"min-w-0\", \"flex\", \"flex-col\", \"gap-4\"], [1, \"flex\", \"justify-between\", \"items-center\", \"border\", \"border-slate-200\", \"bg-slate-50\", \"rounded-xl\", \"p-3\"], [1, \"flex\", \"items-center\", \"gap-5\"], [1, \"text-sm\", \"text-slate-600\", \"font-semibold\", \"block\", \"mb-1\"], [1, \"flex\", \"flex-col\"], [1, \"text-sm\", \"text-slate-600\", \"font-semibold\", \"mb-1\"], [1, \"px-3\", \"py-1\", \"rounded-lg\", \"text-white\", \"text-sm\", \"font-medium\", \"w-fit\", \"shadow-sm\", 3, \"ngStyle\"], [4, \"ngIf\"], [1, \"flex-1\", \"relative\", \"rounded-xl\", \"border\", \"border-slate-200\", \"bg-slate-50\", \"flex\", \"flex-col\", \"overflow-hidden\"], [1, \"flex\", \"justify-end\", \"gap-2\", \"p-2\", \"bg-slate-100\", \"border-b\", \"border-slate-200\", \"rounded-t-xl\"], [1, \"px-3\", \"py-1\", \"rounded-md\", \"border\", \"border-slate-300\", \"bg-white\", \"hover:bg-slate-200\", \"text-sm\", 3, \"click\"], [1, \"text-sm\", \"font-medium\", \"text-slate-600\", \"w-14\", \"text-center\"], [1, \"relative\", \"flex\", \"justify-center\", \"items-start\", \"p-2\", \"overflow-auto\", \"flex-1\", \"bg-slate-50\"], [1, \"inline-block\", 2, \"position\", \"relative\", \"transition\", \"transform 0.2s ease\", \"transform-origin\", \"top left\"], [1, \"border\", \"rounded\", \"shadow-sm\", \"block\"], [1, \"absolute\", \"top-0\", \"left-0\", \"pointer-events-none\"], [1, \"cursor-pointer\", \"border-b\", \"hover:bg-indigo-50\", \"px-4\", \"py-3\", \"text-sm\", \"transition\", 3, \"click\"], [1, \"truncate\", \"text-slate-800\"], [1, \"text-xs\", \"text-slate-500\"], [1, \"text-xs\", \"mt-1\", 3, \"ngClass\"], [1, \"text-center\", \"py-4\", \"text-slate-500\", \"text-sm\"], [1, \"px-5\", \"py-2\", \"rounded-xl\", \"bg-indigo-600\", \"hover:bg-indigo-700\", \"text-white\", \"text-sm\", \"font-medium\", \"transition\", 3, \"click\"]],\n      template: function ClassificationOverviewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"section\", 3)(1, \"div\", 4)(2, \"h1\", 5);\n          i0.ɵɵtext(3, \"Classification Overview\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 6)(5, \"select\", 7);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ClassificationOverviewComponent_Template_select_ngModelChange_5_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.selectedStatus, $event) || (ctx.selectedStatus = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementStart(6, \"option\", 8);\n          i0.ɵɵtext(7, \"All Documents\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(8, ClassificationOverviewComponent_option_8_Template, 2, 1, \"option\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 10)(10, \"input\", 11);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ClassificationOverviewComponent_Template_input_ngModelChange_10_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.searchQuery, $event) || (ctx.searchQuery = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(11, \"svg\", 12);\n          i0.ɵɵelement(12, \"path\", 13);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(13, \"section\", 14)(14, \"aside\", 15)(15, \"div\", 16);\n          i0.ɵɵtext(16, \"Documents\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"ul\");\n          i0.ɵɵtemplate(18, ClassificationOverviewComponent_li_18_Template, 7, 12, \"li\", 17)(19, ClassificationOverviewComponent_li_19_Template, 2, 0, \"li\", 18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 19)(21, \"div\", 20)(22, \"div\", 21)(23, \"div\")(24, \"label\", 22);\n          i0.ɵɵtext(25, \"Project Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"select\", 7);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ClassificationOverviewComponent_Template_select_ngModelChange_26_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.currentDoc.project, $event) || (ctx.currentDoc.project = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementStart(27, \"option\");\n          i0.ɵɵtext(28, \"Invoice Processing\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"option\");\n          i0.ɵɵtext(30, \"Payments & Disbursements\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"option\");\n          i0.ɵɵtext(32, \"Vendor Management\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(33, \"div\", 23)(34, \"span\", 24);\n          i0.ɵɵtext(35, \"Confidence\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"span\", 25);\n          i0.ɵɵtext(37);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(38, ClassificationOverviewComponent_div_38_Template, 3, 0, \"div\", 26);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"div\", 27)(40, \"div\", 28)(41, \"button\", 29);\n          i0.ɵɵlistener(\"click\", function ClassificationOverviewComponent_Template_button_click_41_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.zoomOut());\n          });\n          i0.ɵɵtext(42, \"\\u2212\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(43, \"span\", 30);\n          i0.ɵɵtext(44);\n          i0.ɵɵpipe(45, \"number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(46, \"button\", 29);\n          i0.ɵɵlistener(\"click\", function ClassificationOverviewComponent_Template_button_click_46_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.zoomIn());\n          });\n          i0.ɵɵtext(47, \"+\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(48, \"div\", 31)(49, \"div\", 32, 0);\n          i0.ɵɵelement(51, \"canvas\", 33, 1)(53, \"canvas\", 34, 2);\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedStatus);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.statuses);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchQuery);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngForOf\", ctx.filteredDocuments);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.filteredDocuments.length === 0);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.currentDoc.project);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(13, _c3, ctx.getConfidenceColor(ctx.currentDoc.confidence)));\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate1(\" \", ctx.currentDoc.confidence, \"% \");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.currentDoc.validationStatus !== \"Complete\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(45, 10, ctx.zoomLevel * 100, \"1.0-0\"), \"%\");\n        }\n      },\n      dependencies: [CommonModule, i1.NgClass, i1.NgForOf, i1.NgIf, i1.NgStyle, FormsModule, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel, i1.DecimalPipe],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return ClassificationOverviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}