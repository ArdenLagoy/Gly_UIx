{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/My PC/Documents/Websites/PA/AP-UI/angular-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ElementRef, QueryList } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"pdfCanvas\"];\nconst _c1 = [\"highlightCanvas\"];\nconst _c2 = [\"pdfWrapper\"];\nconst _c3 = [\"fieldInput\"];\nconst _c4 = (a0, a1, a2) => ({\n  \"text-red-500\": a0,\n  \"text-yellow-600\": a1,\n  \"text-green-600\": a2\n});\nconst _c5 = (a0, a1) => ({\n  \"background-color\": a0,\n  \"opacity\": a1\n});\nconst _c6 = () => [\"x\", \"y\", \"w\", \"h\"];\nfunction ExtractionOverviewComponent_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(status_r2);\n  }\n}\nfunction ExtractionOverviewComponent_li_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 32);\n    i0.ɵɵlistener(\"click\", function ExtractionOverviewComponent_li_19_Template_li_click_0_listener() {\n      const i_r4 = i0.ɵɵrestoreView(_r3).index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.selectPdf(i_r4));\n    });\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 34);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 35);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const doc_r6 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"bg-indigo-100\", doc_r6 === ctx_r4.currentDoc)(\"font-semibold\", doc_r6 === ctx_r4.currentDoc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.getFileName(doc_r6.file));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doc_r6.project);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(8, _c4, doc_r6.validationStatus === \"Needs Validation\", doc_r6.validationStatus === \"Missing Fields\", doc_r6.validationStatus === \"Complete\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", doc_r6.validationStatus, \" \");\n  }\n}\nfunction ExtractionOverviewComponent_li_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 36);\n    i0.ɵɵtext(1, \" No files found \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ExtractionOverviewComponent_div_39_div_8_input_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 48, 3);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_div_39_div_8_input_9_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const field_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r4.currentDoc.fields[field_r8.key].value, $event) || (ctx_r4.currentDoc.fields[field_r8.key].value = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"focus\", function ExtractionOverviewComponent_div_39_div_8_input_9_Template_input_focus_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const field_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.highlight(field_r8));\n    })(\"blur\", function ExtractionOverviewComponent_div_39_div_8_input_9_Template_input_blur_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r4 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r4.clearHighlight());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const field_r8 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r4.currentDoc.fields[field_r8.key].value);\n  }\n}\nfunction ExtractionOverviewComponent_div_39_div_8_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 51)(1, \"span\", 52);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 53);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_div_39_div_8_div_10_div_1_Template_input_ngModelChange_3_listener($event) {\n      const prop_r10 = i0.ɵɵrestoreView(_r9).$implicit;\n      const field_r8 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r4.currentDoc.fields[field_r8.key].coords[prop_r10], $event) || (ctx_r4.currentDoc.fields[field_r8.key].coords[prop_r10] = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const prop_r10 = ctx.$implicit;\n    const field_r8 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", prop_r10, \":\");\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r4.currentDoc.fields[field_r8.key].coords[prop_r10]);\n  }\n}\nfunction ExtractionOverviewComponent_div_39_div_8_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 49);\n    i0.ɵɵtemplate(1, ExtractionOverviewComponent_div_39_div_8_div_10_div_1_Template, 4, 2, \"div\", 50);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(1, _c6));\n  }\n}\nfunction ExtractionOverviewComponent_div_39_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 42)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 43)(5, \"span\", 44);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 45);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(9, ExtractionOverviewComponent_div_39_div_8_input_9_Template, 2, 1, \"input\", 46)(10, ExtractionOverviewComponent_div_39_div_8_div_10_Template, 2, 2, \"div\", 47);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const field_r8 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(field_r8.label);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(7, _c5, field_r8.color, ctx_r4.activeField === field_r8.key ? \"1\" : \"0.7\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", field_r8.hotkey, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", ctx_r4.getConfidenceColor(ctx_r4.currentDoc.fields[field_r8.key].confidence));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.currentDoc.fields[field_r8.key].confidence, \"% \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.currentDoc && ctx_r4.currentDoc.fields[field_r8.key]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.showCoords && ctx_r4.currentDoc && ctx_r4.currentDoc.fields[field_r8.key]);\n  }\n}\nfunction ExtractionOverviewComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 37)(2, \"label\", 38);\n    i0.ɵɵtext(3, \"Project\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h2\", 40);\n    i0.ɵɵtext(6, \"Detected Fields\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 41);\n    i0.ɵɵtemplate(8, ExtractionOverviewComponent_div_39_div_8_Template, 11, 10, \"div\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r4.currentDoc.project);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.fieldList);\n  }\n}\nfunction ExtractionOverviewComponent_div_40_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 62)(2, \"input\", 63);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_div_40_tr_13_Template_input_ngModelChange_2_listener($event) {\n      const item_r12 = i0.ɵɵrestoreView(_r11).$implicit;\n      i0.ɵɵtwoWayBindingSet(item_r12.description, $event) || (item_r12.description = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"focus\", function ExtractionOverviewComponent_div_40_tr_13_Template_input_focus_2_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.highlightTable());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\", 64)(4, \"input\", 65);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_div_40_tr_13_Template_input_ngModelChange_4_listener($event) {\n      const item_r12 = i0.ɵɵrestoreView(_r11).$implicit;\n      i0.ɵɵtwoWayBindingSet(item_r12.qty, $event) || (item_r12.qty = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"focus\", function ExtractionOverviewComponent_div_40_tr_13_Template_input_focus_4_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.highlightTable());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\", 66)(6, \"input\", 67);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_div_40_tr_13_Template_input_ngModelChange_6_listener($event) {\n      const item_r12 = i0.ɵɵrestoreView(_r11).$implicit;\n      i0.ɵɵtwoWayBindingSet(item_r12.amount, $event) || (item_r12.amount = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"focus\", function ExtractionOverviewComponent_div_40_tr_13_Template_input_focus_6_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.highlightTable());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", item_r12.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", item_r12.qty);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", item_r12.amount);\n  }\n}\nfunction ExtractionOverviewComponent_div_40_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 51)(1, \"span\", 52);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 69);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_div_40_div_14_div_1_Template_input_ngModelChange_3_listener($event) {\n      const prop_r14 = i0.ɵɵrestoreView(_r13).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r4.currentDoc.tableCoords[prop_r14], $event) || (ctx_r4.currentDoc.tableCoords[prop_r14] = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"input\", function ExtractionOverviewComponent_div_40_div_14_div_1_Template_input_input_3_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r4 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r4.activeField === \"lineItems\" && ctx_r4.highlightTable());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const prop_r14 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", prop_r14, \":\");\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r4.currentDoc.tableCoords[prop_r14]);\n  }\n}\nfunction ExtractionOverviewComponent_div_40_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 68);\n    i0.ɵɵtemplate(1, ExtractionOverviewComponent_div_40_div_14_div_1_Template, 4, 2, \"div\", 50);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(1, _c6));\n  }\n}\nfunction ExtractionOverviewComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54)(1, \"h3\", 55);\n    i0.ɵɵtext(2, \"Line Items\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\", 56)(4, \"thead\", 57)(5, \"tr\")(6, \"th\", 58);\n    i0.ɵɵtext(7, \"Item Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 59);\n    i0.ɵɵtext(9, \"Qty\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 60);\n    i0.ɵɵtext(11, \"Amount\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, ExtractionOverviewComponent_div_40_tr_13_Template, 7, 3, \"tr\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(14, ExtractionOverviewComponent_div_40_div_14_Template, 2, 2, \"div\", 61);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.currentDoc.lineItems);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.showCoords);\n  }\n}\npdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\nexport let ExtractionOverviewComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class ExtractionOverviewComponent {\n    constructor() {\n      this.showCoords = true;\n      this.searchQuery = '';\n      this.selectedStatus = '';\n      this.activeField = null;\n      this.currentIndex = 0;\n      this.baseScale = 1;\n      this.zoomLevel = 1.0;\n      this.baseWidth = 480;\n      this.statuses = ['Needs Validation', 'Complete'];\n      this.fieldList = [{\n        key: 'poNumber',\n        label: 'PO Number',\n        hotkey: 'e',\n        color: '#ef4444'\n      }, {\n        key: 'orderDate',\n        label: 'Order Date',\n        hotkey: 'r',\n        color: '#22c55e'\n      }, {\n        key: 'companyName',\n        label: 'Company Name',\n        hotkey: 't',\n        color: '#3b82f6'\n      }, {\n        key: 'amount',\n        label: 'Amount',\n        hotkey: 'y',\n        color: '#a855f7'\n      }];\n      this.documents = [{\n        project: 'Invoice Processing',\n        validationStatus: 'Needs Validation',\n        file: 'assets/pdfs/POT182209.pdf',\n        fields: {\n          poNumber: {\n            value: 'T182209',\n            confidence: 98,\n            coords: {\n              x: 420,\n              y: 55,\n              w: 40,\n              h: 15\n            }\n          },\n          orderDate: {\n            value: '17/10/2025',\n            confidence: 94,\n            coords: {\n              x: 410,\n              y: 68,\n              w: 50,\n              h: 15\n            }\n          },\n          companyName: {\n            value: 'WESTRIDGE ENGINEERING SERVICES LTD',\n            confidence: 92,\n            coords: {\n              x: 25,\n              y: 58,\n              w: 153,\n              h: 23\n            }\n          },\n          amount: {\n            value: '$261.00',\n            confidence: 97,\n            coords: {\n              x: 413,\n              y: 336,\n              w: 50,\n              h: 20\n            }\n          }\n        },\n        tableCoords: {\n          x: 21,\n          y: 219,\n          w: 439,\n          h: 63\n        },\n        lineItems: [{\n          description: 'Industrial Gloves',\n          qty: 1,\n          amount: '$11'\n        }, {\n          description: 'Paint Buckets (5L)',\n          qty: 50,\n          amount: '$250'\n        }]\n      }, {\n        project: 'Payments & Disbursements',\n        validationStatus: 'Needs Validation',\n        file: 'assets/pdfs/PO1299488.pdf',\n        fields: {\n          poNumber: {\n            value: 'PO1299488',\n            confidence: 96,\n            coords: {\n              x: 367,\n              y: 166,\n              w: 65,\n              h: 20\n            }\n          },\n          orderDate: {\n            value: '',\n            confidence: 0,\n            coords: {\n              x: 0,\n              y: 0,\n              w: 0,\n              h: 0\n            }\n          },\n          companyName: {\n            value: 'NORTHRIDGE INDUSTRIAL SOLUTIONS INC.',\n            confidence: 90,\n            coords: {\n              x: 55,\n              y: 70,\n              w: 110,\n              h: 53\n            }\n          },\n          amount: {\n            value: '$220',\n            confidence: 93,\n            coords: {\n              x: 395,\n              y: 374,\n              w: 31,\n              h: 20\n            }\n          }\n        },\n        tableCoords: {\n          x: 54,\n          y: 248,\n          w: 383,\n          h: 78\n        },\n        lineItems: [{\n          description: 'Concrete Bags (50 kg)',\n          qty: 2,\n          amount: '200'\n        }, {\n          description: 'Electrical Cables (100m roll)',\n          qty: 1,\n          amount: '0'\n        }]\n      }, {\n        project: 'Vendor Management',\n        validationStatus: 'Complete',\n        file: 'assets/pdfs/PO110000.pdf',\n        fields: {\n          poNumber: {\n            value: '110000',\n            confidence: 99,\n            coords: {\n              x: 396,\n              y: 100,\n              w: 34,\n              h: 18\n            }\n          },\n          orderDate: {\n            value: '23/09/2025',\n            confidence: 98,\n            coords: {\n              x: 395,\n              y: 84,\n              w: 55,\n              h: 17\n            }\n          },\n          companyName: {\n            value: 'GLOBAL PROCUREMENT LTD.',\n            confidence: 95,\n            coords: {\n              x: 27,\n              y: 68,\n              w: 120,\n              h: 20\n            }\n          },\n          amount: {\n            value: '$1,375.50',\n            confidence: 97,\n            coords: {\n              x: 409,\n              y: 543,\n              w: 45,\n              h: 18\n            }\n          }\n        },\n        tableCoords: {\n          x: 27,\n          y: 330,\n          w: 426,\n          h: 43\n        },\n        lineItems: [{\n          description: 'Small part for FUJITSU Inverter',\n          qty: 10,\n          amount: '$250.00'\n        }, {\n          description: 'Lighting adapter',\n          qty: 1,\n          amount: '$75.00'\n        }]\n      }];\n    }\n    get filteredDocuments() {\n      const q = this.searchQuery.trim().toLowerCase();\n      return this.documents.filter(doc => {\n        const matchesSearch = this.getFileName(doc.file).toLowerCase().includes(q);\n        const matchesStatus = this.selectedStatus ? doc.validationStatus === this.selectedStatus : true;\n        return matchesSearch && matchesStatus;\n      });\n    }\n    get currentDoc() {\n      if (!this.filteredDocuments || this.filteredDocuments.length === 0) return null;\n      return this.filteredDocuments[this.currentIndex] || this.filteredDocuments[0];\n    }\n    ngAfterViewInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.loadPdf(_this.currentDoc?.file);\n      })();\n    }\n    selectPdf(index) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.currentIndex = index;\n        _this2.zoomLevel = 1.0;\n        _this2.activeField = null;\n        yield _this2.loadPdf(_this2.currentDoc?.file);\n        _this2.clearHighlight();\n      })();\n    }\n    loadPdf(url) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        if (!url) return;\n        const loadingTask = pdfjsLib.getDocument(url);\n        _this3.pdfDoc = yield loadingTask.promise;\n        const page = yield _this3.pdfDoc.getPage(1);\n        const unscaled = page.getViewport({\n          scale: 1\n        });\n        _this3.baseScale = _this3.baseWidth / unscaled.width;\n        yield _this3.renderPage();\n      })();\n    }\n    renderPage() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this4.pdfDoc) return;\n        const page = yield _this4.pdfDoc.getPage(1);\n        const viewport = page.getViewport({\n          scale: _this4.baseScale\n        });\n        const canvas = _this4.pdfCanvas.nativeElement;\n        const ctx = canvas.getContext('2d');\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n        const highlight = _this4.highlightCanvas.nativeElement;\n        highlight.width = viewport.width;\n        highlight.height = viewport.height;\n        yield page.render({\n          canvasContext: ctx,\n          viewport\n        }).promise;\n        _this4.applyZoomTransform();\n      })();\n    }\n    applyZoomTransform() {\n      if (this.pdfWrapper?.nativeElement) {\n        this.pdfWrapper.nativeElement.style.transform = `scale(${this.zoomLevel})`;\n      }\n    }\n    zoomIn() {\n      this.zoomLevel = Math.min(this.zoomLevel + 0.1, 3);\n      this.applyZoomTransform();\n    }\n    zoomOut() {\n      this.zoomLevel = Math.max(this.zoomLevel - 0.1, 0.5);\n      this.applyZoomTransform();\n    }\n    highlight(field) {\n      if (!this.currentDoc) return;\n      this.activeField = field.key;\n      this.drawHighlight(this.currentDoc.fields[field.key].coords, field.color);\n    }\n    highlightTable() {\n      if (!this.currentDoc) return;\n      this.activeField = 'lineItems';\n      const table = this.currentDoc.tableCoords;\n      this.drawHighlight(table, '#0ea5e9');\n    }\n    drawHighlight(coords, color) {\n      const ctx = this.highlightCanvas.nativeElement.getContext('2d');\n      ctx.clearRect(0, 0, this.highlightCanvas.nativeElement.width, this.highlightCanvas.nativeElement.height);\n      ctx.fillStyle = this.hexToRgba(color, 0.35);\n      ctx.fillRect(coords.x, coords.y, coords.w, coords.h);\n    }\n    clearHighlight() {\n      const ctx = this.highlightCanvas.nativeElement.getContext('2d');\n      ctx.clearRect(0, 0, this.highlightCanvas.nativeElement.width, this.highlightCanvas.nativeElement.height);\n      this.activeField = null;\n    }\n    hexToRgba(hex, alpha) {\n      const bigint = parseInt(hex.replace('#', ''), 16);\n      const r = bigint >> 16 & 255;\n      const g = bigint >> 8 & 255;\n      const b = bigint & 255;\n      return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n    }\n    getFileName(path) {\n      return path.split('/').pop() || '';\n    }\n    getConfidenceColor(conf) {\n      if (conf === undefined || conf === null) return 'text-slate-400';\n      if (conf >= 95) return 'text-green-600';\n      if (conf >= 80) return 'text-yellow-600';\n      return 'text-red-500';\n    }\n    handleKeydown(event) {\n      const pressed = event.key.toLowerCase();\n      const field = this.fieldList.find(f => f.hotkey === pressed);\n      if (field && this.currentDoc) {\n        event.preventDefault();\n        const index = this.fieldList.findIndex(f => f.key === field.key);\n        const inputEl = this.fieldInputs.get(index)?.nativeElement;\n        if (inputEl) {\n          inputEl.focus();\n          this.highlight(field);\n        }\n      }\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function ExtractionOverviewComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ExtractionOverviewComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ExtractionOverviewComponent,\n      selectors: [[\"extraction-overview\"]],\n      viewQuery: function ExtractionOverviewComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n          i0.ɵɵviewQuery(_c2, 5);\n          i0.ɵɵviewQuery(_c3, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pdfCanvas = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.highlightCanvas = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pdfWrapper = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fieldInputs = _t);\n        }\n      },\n      hostBindings: function ExtractionOverviewComponent_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"keydown\", function ExtractionOverviewComponent_keydown_HostBindingHandler($event) {\n            return ctx.handleKeydown($event);\n          }, i0.ɵɵresolveWindow);\n        }\n      },\n      decls: 41,\n      vars: 11,\n      consts: [[\"pdfWrapper\", \"\"], [\"pdfCanvas\", \"\"], [\"highlightCanvas\", \"\"], [\"fieldInput\", \"\"], [\"id\", \"extraction-overview\", \"aria-labelledby\", \"extractov-title\", 1, \"view\", \"active\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-4\"], [\"id\", \"extractov-title\", 1, \"text-2xl\", \"font-bold\"], [1, \"flex\", \"items-center\", \"gap-3\"], [1, \"px-3\", \"py-2\", \"rounded-xl\", \"border\", \"border-slate-300\", \"text-sm\", \"bg-white\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [4, \"ngFor\", \"ngForOf\"], [1, \"relative\"], [\"type\", \"text\", \"placeholder\", \"Search file...\", 1, \"pl-8\", \"pr-3\", \"py-2\", \"rounded-xl\", \"border\", \"border-slate-300\", \"text-sm\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-indigo-400\", 3, \"ngModelChange\", \"ngModel\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"w-4\", \"h-4\", \"text-slate-400\", \"absolute\", \"left-2.5\", \"top-2.5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M21 21l-4.35-4.35m1.85-5.15a7 7 0 11-14 0 7 7 0 0114 0z\"], [1, \"rounded-2xl\", \"bg-white\", \"p-5\", \"shadow-sm\", \"border\", \"border-slate-200\", \"grid\", \"gap-5\", 2, \"grid-template-columns\", \"260px 1fr\", \"grid-template-rows\", \"auto auto\"], [1, \"row-span-2\", \"border\", \"border-slate-200\", \"rounded-xl\", \"bg-slate-50\", \"overflow-y-auto\", \"overflow-x-hidden\", \"max-h-[900px]\"], [1, \"p-3\", \"border-b\", \"bg-slate-100\", \"font-semibold\", \"text-slate-700\", \"text-sm\", \"flex\", \"justify-between\", \"items-center\"], [\"class\", \"cursor-pointer border-b hover:bg-indigo-50 px-4 py-3 text-sm transition\", 3, \"bg-indigo-100\", \"font-semibold\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center py-4 text-slate-500 text-sm\", 4, \"ngIf\"], [1, \"flex\", \"gap-5\", \"min-h-[600px]\", \"col-start-2\"], [1, \"flex-1\", \"min-w-0\", \"relative\", \"rounded-xl\", \"border\", \"border-slate-200\", \"bg-slate-50\", \"flex\", \"flex-col\"], [1, \"flex\", \"justify-end\", \"gap-2\", \"p-2\", \"bg-slate-100\", \"border-b\", \"border-slate-200\", \"rounded-t-xl\"], [1, \"px-3\", \"py-1\", \"rounded-md\", \"border\", \"border-slate-300\", \"bg-white\", \"hover:bg-slate-200\", \"text-sm\", 3, \"click\"], [1, \"text-sm\", \"font-medium\", \"text-slate-600\", \"w-14\", \"text-center\"], [1, \"relative\", \"flex\", \"justify-center\", \"items-start\", \"p-2\", \"overflow-auto\", \"flex-1\", \"bg-slate-50\"], [1, \"inline-block\", 2, \"position\", \"relative\", \"transition\", \"transform 0.2s ease\", \"transform-origin\", \"top left\"], [1, \"border\", \"rounded\", \"shadow-sm\", \"block\"], [1, \"absolute\", \"top-0\", \"left-0\", \"pointer-events-none\"], [1, \"w-[360px]\", \"flex-shrink-0\", \"rounded-xl\", \"border\", \"border-slate-200\", \"bg-slate-50\", \"p-4\", \"overflow-x-hidden\", \"flex\", \"flex-col\"], [4, \"ngIf\"], [\"class\", \"col-start-2 rounded-xl border border-slate-200 bg-slate-50 p-4\", 4, \"ngIf\"], [1, \"cursor-pointer\", \"border-b\", \"hover:bg-indigo-50\", \"px-4\", \"py-3\", \"text-sm\", \"transition\", 3, \"click\"], [1, \"truncate\", \"text-slate-800\"], [1, \"text-xs\", \"text-slate-500\"], [1, \"text-xs\", \"mt-1\", 3, \"ngClass\"], [1, \"text-center\", \"py-4\", \"text-slate-500\", \"text-sm\"], [1, \"mb-4\"], [1, \"text-sm\", \"text-slate-600\", \"font-semibold\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"mt-1\", \"w-full\", \"px-3\", \"py-2\", \"rounded-xl\", \"border\", \"border-slate-300\", \"bg-gray-100\", \"text-sm\", \"cursor-not-allowed\", 3, \"value\"], [1, \"font-semibold\", \"text-lg\", \"mb-3\", \"text-slate-800\"], [1, \"flex\", \"flex-col\", \"gap-5\"], [1, \"text-sm\", \"text-slate-600\", \"flex\", \"justify-between\", \"items-center\"], [1, \"flex\", \"items-center\", \"gap-2\"], [1, \"text-xs\", \"text-white\", \"px-2\", \"py-0.5\", \"rounded-md\", \"font-semibold\", \"shadow-sm\", \"transition-all\", 3, \"ngStyle\"], [3, \"ngClass\"], [\"type\", \"text\", \"class\", \"mt-1 w-full px-3 py-2 rounded-xl border border-slate-300 bg-white text-sm focus:ring-2 focus:ring-offset-1 focus:ring-yellow-300 focus:outline-none\", 3, \"ngModel\", \"ngModelChange\", \"focus\", \"blur\", 4, \"ngIf\"], [\"class\", \"text-[11px] text-slate-600 mt-1 ml-1 flex gap-1\", 4, \"ngIf\"], [\"type\", \"text\", 1, \"mt-1\", \"w-full\", \"px-3\", \"py-2\", \"rounded-xl\", \"border\", \"border-slate-300\", \"bg-white\", \"text-sm\", \"focus:ring-2\", \"focus:ring-offset-1\", \"focus:ring-yellow-300\", \"focus:outline-none\", 3, \"ngModelChange\", \"focus\", \"blur\", \"ngModel\"], [1, \"text-[11px]\", \"text-slate-600\", \"mt-1\", \"ml-1\", \"flex\", \"gap-1\"], [\"class\", \"flex items-center gap-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"items-center\", \"gap-1\"], [1, \"font-medium\", \"uppercase\"], [\"type\", \"number\", 1, \"w-14\", \"px-1\", \"py-0.5\", \"border\", \"border-slate-300\", \"rounded\", \"text-[11px]\", \"text-center\", \"bg-white\", \"focus:outline-none\", \"focus:ring-1\", \"focus:ring-indigo-400\", 3, \"ngModelChange\", \"ngModel\"], [1, \"col-start-2\", \"rounded-xl\", \"border\", \"border-slate-200\", \"bg-slate-50\", \"p-4\"], [1, \"font-semibold\", \"text-lg\", \"mb-2\", \"text-slate-800\"], [1, \"w-full\", \"text-sm\", \"border\", \"border-slate-300\", \"rounded-xl\", \"overflow-hidden\"], [1, \"bg-slate-100\", \"text-slate-700\", \"font-semibold\"], [1, \"px-2\", \"py-1\", \"text-left\"], [1, \"px-2\", \"py-1\", \"text-center\", \"w-16\"], [1, \"px-2\", \"py-1\", \"text-right\", \"w-20\"], [\"class\", \"text-[11px] text-slate-600 mt-2 flex gap-1\", 4, \"ngIf\"], [1, \"border-t\", \"border-slate-200\"], [\"type\", \"text\", 1, \"w-full\", \"px-2\", \"py-1\", \"bg-white\", \"border\", \"border-slate-300\", \"rounded\", \"focus:ring-1\", \"focus:ring-indigo-400\", \"text-sm\", 3, \"ngModelChange\", \"focus\", \"ngModel\"], [1, \"border-t\", \"border-slate-200\", \"text-center\"], [\"type\", \"number\", 1, \"w-14\", \"px-2\", \"py-1\", \"bg-white\", \"border\", \"border-slate-300\", \"rounded\", \"text-center\", \"focus:ring-1\", \"focus:ring-indigo-400\", \"text-sm\", 3, \"ngModelChange\", \"focus\", \"ngModel\"], [1, \"border-t\", \"border-slate-200\", \"text-right\"], [\"type\", \"text\", 1, \"w-full\", \"px-2\", \"py-1\", \"bg-white\", \"border\", \"border-slate-300\", \"rounded\", \"text-right\", \"focus:ring-1\", \"focus:ring-indigo-400\", \"text-sm\", 3, \"ngModelChange\", \"focus\", \"ngModel\"], [1, \"text-[11px]\", \"text-slate-600\", \"mt-2\", \"flex\", \"gap-1\"], [\"type\", \"number\", 1, \"w-14\", \"px-1\", \"py-0.5\", \"border\", \"border-slate-300\", \"rounded\", \"text-[11px]\", \"text-center\", \"bg-white\", \"focus:outline-none\", \"focus:ring-1\", \"focus:ring-indigo-400\", 3, \"ngModelChange\", \"input\", \"ngModel\"]],\n      template: function ExtractionOverviewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"section\", 4)(1, \"div\", 5)(2, \"h1\", 6);\n          i0.ɵɵtext(3, \"Extraction Overview\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 7)(5, \"select\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_Template_select_ngModelChange_5_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.selectedStatus, $event) || (ctx.selectedStatus = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementStart(6, \"option\", 9);\n          i0.ɵɵtext(7, \"All Documents\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(8, ExtractionOverviewComponent_option_8_Template, 2, 1, \"option\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 11)(10, \"input\", 12);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ExtractionOverviewComponent_Template_input_ngModelChange_10_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.searchQuery, $event) || (ctx.searchQuery = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(11, \"svg\", 13);\n          i0.ɵɵelement(12, \"path\", 14);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(13, \"section\", 15)(14, \"aside\", 16)(15, \"div\", 17)(16, \"span\");\n          i0.ɵɵtext(17, \"Documents\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"ul\");\n          i0.ɵɵtemplate(19, ExtractionOverviewComponent_li_19_Template, 7, 12, \"li\", 18)(20, ExtractionOverviewComponent_li_20_Template, 2, 0, \"li\", 19);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(21, \"div\", 20)(22, \"div\", 21)(23, \"div\", 22)(24, \"button\", 23);\n          i0.ɵɵlistener(\"click\", function ExtractionOverviewComponent_Template_button_click_24_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.zoomOut());\n          });\n          i0.ɵɵtext(25, \"\\u2212\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"span\", 24);\n          i0.ɵɵtext(27);\n          i0.ɵɵpipe(28, \"number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"button\", 23);\n          i0.ɵɵlistener(\"click\", function ExtractionOverviewComponent_Template_button_click_29_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.zoomIn());\n          });\n          i0.ɵɵtext(30, \"+\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"div\", 25)(32, \"div\", 26, 0);\n          i0.ɵɵelement(34, \"canvas\", 27, 1)(36, \"canvas\", 28, 2);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(38, \"div\", 29);\n          i0.ɵɵtemplate(39, ExtractionOverviewComponent_div_39_Template, 9, 2, \"div\", 30);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(40, ExtractionOverviewComponent_div_40_Template, 15, 2, \"div\", 31);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedStatus);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.statuses);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchQuery);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngForOf\", ctx.filteredDocuments);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.filteredDocuments.length === 0);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(28, 8, ctx.zoomLevel * 100, \"1.0-0\"), \"%\");\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"ngIf\", ctx.currentDoc);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.currentDoc);\n        }\n      },\n      dependencies: [CommonModule, i1.NgClass, i1.NgForOf, i1.NgIf, i1.NgStyle, FormsModule, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel, i1.DecimalPipe],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return ExtractionOverviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}