{"ast":null,"code":"import { MatSnackBar } from '@angular/material/snack-bar';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ScheduleComponent } from './schedule.component';\nimport { OutputComponent } from './output.component';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/snack-bar\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/menu\";\nimport * as i5 from \"@angular/material/button\";\nfunction SchedulingJobLogsComponent_div_20_span_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.sortDirection === \"asc\" ? \"\\u25B2\" : \"\\u25BC\");\n  }\n}\nfunction SchedulingJobLogsComponent_div_20_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.sortDirection === \"asc\" ? \"\\u25B2\" : \"\\u25BC\");\n  }\n}\nfunction SchedulingJobLogsComponent_div_20_span_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.sortDirection === \"asc\" ? \"\\u25B2\" : \"\\u25BC\");\n  }\n}\nfunction SchedulingJobLogsComponent_div_20_tr_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 36);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 36);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 36);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 36)(10, \"span\", 37);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\", 36)(13, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_tr_45_Template_button_click_13_listener() {\n      const j_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.exportLogs(j_r4));\n    });\n    i0.ɵɵtext(14, \" CSV \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\", 36)(16, \"div\")(17, \"button\", 39);\n    i0.ɵɵtext(18, \"Export Report \\u25BE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"mat-menu\", null, 0)(21, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_tr_45_Template_button_click_21_listener() {\n      const j_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.exportReport(j_r4, \"csv\"));\n    });\n    i0.ɵɵtext(22, \"CSV\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_tr_45_Template_button_click_23_listener() {\n      const j_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.exportReport(j_r4, \"excel\"));\n    });\n    i0.ɵɵtext(24, \"Excel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_tr_45_Template_button_click_25_listener() {\n      const j_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.exportReport(j_r4, \"json\"));\n    });\n    i0.ɵɵtext(26, \"JSON\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_tr_45_Template_button_click_27_listener() {\n      const j_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.exportReport(j_r4, \"xaml\"));\n    });\n    i0.ɵɵtext(28, \"XAML\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const j_r4 = ctx.$implicit;\n    const menu_r5 = i0.ɵɵreference(20);\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(j_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 12, j_r4.start, \"short\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(j_r4.end ? i0.ɵɵpipeBind2(8, 15, j_r4.end, \"short\") : \"-\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.statusBadgeClass(j_r4.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(j_r4.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !j_r4.logs || j_r4.logs.length === 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", menu_r5)(\"disabled\", !j_r4.results || j_r4.results.length === 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !j_r4.results || j_r4.results.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !j_r4.results || j_r4.results.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !j_r4.results || j_r4.results.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !j_r4.results || j_r4.results.length === 0);\n  }\n}\nfunction SchedulingJobLogsComponent_div_20_tr_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 41);\n    i0.ɵɵtext(2, \"No jobs found.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SchedulingJobLogsComponent_div_20_button_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_button_53_Template_button_click_0_listener() {\n      const p_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.goToJobPage(p_r7));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"font-bold\", p_r7 === ctx_r1.jobPage);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(p_r7);\n  }\n}\nfunction SchedulingJobLogsComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 15)(2, \"div\", 16)(3, \"input\", 17);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function SchedulingJobLogsComponent_div_20_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.search, $event) || (ctx_r1.search = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"input\", function SchedulingJobLogsComponent_div_20_Template_input_input_3_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.applyFilters());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 18);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function SchedulingJobLogsComponent_div_20_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.statusFilter, $event) || (ctx_r1.statusFilter = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function SchedulingJobLogsComponent_div_20_Template_select_change_4_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.applyFilters());\n    });\n    i0.ɵɵelementStart(5, \"option\", 19);\n    i0.ɵɵtext(6, \"All statuses\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 20);\n    i0.ɵɵtext(8, \"Queued\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 21);\n    i0.ɵɵtext(10, \"Running\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 22);\n    i0.ɵɵtext(12, \"Success\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 23);\n    i0.ɵɵtext(14, \"Failed\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"div\", 16)(16, \"label\", 24);\n    i0.ɵɵtext(17, \"Page size\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"select\", 25);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function SchedulingJobLogsComponent_div_20_Template_select_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.pageSize, $event) || (ctx_r1.pageSize = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function SchedulingJobLogsComponent_div_20_Template_select_change_18_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onPageSizeChange());\n    });\n    i0.ɵɵelementStart(19, \"option\", 26);\n    i0.ɵɵtext(20, \"5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"option\", 26);\n    i0.ɵɵtext(22, \"10\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"option\", 26);\n    i0.ɵɵtext(24, \"20\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(25, \"div\", 27)(26, \"table\", 28)(27, \"thead\", 29)(28, \"tr\")(29, \"th\", 30);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_Template_th_click_29_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.sortBy(\"name\"));\n    });\n    i0.ɵɵtext(30, \"Job Name \");\n    i0.ɵɵtemplate(31, SchedulingJobLogsComponent_div_20_span_31_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\", 30);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_Template_th_click_32_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.sortBy(\"start\"));\n    });\n    i0.ɵɵtext(33, \"Start Date & Time \");\n    i0.ɵɵtemplate(34, SchedulingJobLogsComponent_div_20_span_34_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"th\", 30);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_Template_th_click_35_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.sortBy(\"end\"));\n    });\n    i0.ɵɵtext(36, \"End Date & Time \");\n    i0.ɵɵtemplate(37, SchedulingJobLogsComponent_div_20_span_37_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"th\", 31);\n    i0.ɵɵtext(39, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"th\", 31);\n    i0.ɵɵtext(41, \"Export Logs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"th\", 31);\n    i0.ɵɵtext(43, \"Export Report\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(44, \"tbody\");\n    i0.ɵɵtemplate(45, SchedulingJobLogsComponent_div_20_tr_45_Template, 29, 18, \"tr\", 32)(46, SchedulingJobLogsComponent_div_20_tr_46_Template, 3, 0, \"tr\", 12);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(47, \"div\", 33)(48, \"div\", 24);\n    i0.ɵɵtext(49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"div\", 16)(51, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_Template_button_click_51_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.prevJobPage());\n    });\n    i0.ɵɵtext(52, \"Prev\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(53, SchedulingJobLogsComponent_div_20_button_53_Template, 2, 3, \"button\", 35);\n    i0.ɵɵelementStart(54, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_div_20_Template_button_click_54_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.nextJobPage());\n    });\n    i0.ɵɵtext(55, \"Next\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.search);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.statusFilter);\n    i0.ɵɵadvance(14);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.pageSize);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", 5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", 10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", 20);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.sortField === \"name\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.sortField === \"start\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.sortField === \"end\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.paginatedJobs);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.paginatedJobs.length === 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\"Showing \", ctx_r1.getJobRangeStart(), \" - \", ctx_r1.getJobRangeEnd(), \" of \", ctx_r1.filteredJobs.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.jobPage === 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.jobPagesArray);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.jobPage === ctx_r1.jobTotalPages);\n  }\n}\nfunction SchedulingJobLogsComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"schedule-view\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SchedulingJobLogsComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"output-view\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SchedulingJobLogsComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.toastMessage);\n  }\n}\nfunction SchedulingJobLogsComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 45);\n    i0.ɵɵelement(2, \"circle\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"span\", 47);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.busyMessage);\n  }\n}\nexport let SchedulingJobLogsComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class SchedulingJobLogsComponent {\n    // Inject MatSnackBar optionally (use type any so build won't fail if package not installed yet)\n    constructor(snackBar) {\n      this.snackBar = snackBar;\n      // Tabs\n      this.activeTab = 'jobs';\n      // Jobs table state\n      this.jobs = [];\n      this.filteredJobs = [];\n      this.paginatedJobs = [];\n      this.search = '';\n      this.statusFilter = '';\n      this.sortField = 'start';\n      this.sortDirection = 'desc';\n      this.pageSize = 10;\n      this.jobPage = 1;\n      this.jobTotalPages = 1;\n      this.jobPagesArray = [];\n      // Export menu control\n      this.exportMenuFor = null;\n      // Toast / busy state\n      this.toastMessage = '';\n      this.busy = false;\n      this.busyMessage = '';\n      this.generateSampleJobs();\n      this.applyFilters();\n    }\n    // With Material menus we don't need a manual document click handler to close menus.\n    activateTab(t) {\n      this.activeTab = t;\n    }\n    generateSampleJobs() {\n      const now = new Date();\n      const statuses = ['Queued', 'Running', 'Success', 'Failed'];\n      for (let i = 1; i <= 23; i++) {\n        const start = new Date(now.getTime() - i * 3600 * 1000);\n        const end = Math.random() > 0.3 ? new Date(start.getTime() + Math.floor(Math.random() * 120) * 60000) : null;\n        const status = statuses[i % statuses.length];\n        const logs = Array.from({\n          length: Math.floor(Math.random() * 10)\n        }, (_, k) => `Log line ${k + 1} for job ${i}`);\n        const results = Math.random() > 0.2 ? [{\n          id: 1,\n          value: 'result'\n        }] : [];\n        this.jobs.push({\n          id: i,\n          name: `Job ${i}`,\n          start,\n          end,\n          status,\n          logs,\n          results\n        });\n      }\n    }\n    applyFilters() {\n      const term = this.search?.toLowerCase().trim();\n      this.filteredJobs = this.jobs.filter(j => {\n        if (this.statusFilter && j.status !== this.statusFilter) return false;\n        if (term && !j.name.toLowerCase().includes(term)) return false;\n        return true;\n      });\n      this.filteredJobs.sort((a, b) => {\n        let av = a[this.mapSortField(this.sortField)];\n        let bv = b[this.mapSortField(this.sortField)];\n        if (av == null) av = '';\n        if (bv == null) bv = '';\n        if (av < bv) return this.sortDirection === 'asc' ? -1 : 1;\n        if (av > bv) return this.sortDirection === 'asc' ? 1 : -1;\n        return 0;\n      });\n      this.jobPage = 1;\n      this.updateJobPagination();\n    }\n    mapSortField(f) {\n      return f === 'name' ? 'name' : f === 'start' ? 'start' : 'end';\n    }\n    sortBy(f) {\n      if (this.sortField === f) this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';else {\n        this.sortField = f;\n        this.sortDirection = 'asc';\n      }\n      this.applyFilters();\n    }\n    updateJobPagination() {\n      this.jobTotalPages = Math.max(1, Math.ceil(this.filteredJobs.length / this.pageSize));\n      this.jobPagesArray = Array.from({\n        length: this.jobTotalPages\n      }, (_, i) => i + 1);\n      this.goToJobPage(Math.min(this.jobPage, this.jobTotalPages));\n    }\n    goToJobPage(p) {\n      this.jobPage = Math.max(1, Math.min(p, this.jobTotalPages));\n      const start = (this.jobPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      this.paginatedJobs = this.filteredJobs.slice(start, end);\n    }\n    prevJobPage() {\n      if (this.jobPage > 1) this.goToJobPage(this.jobPage - 1);\n    }\n    nextJobPage() {\n      if (this.jobPage < this.jobTotalPages) this.goToJobPage(this.jobPage + 1);\n    }\n    onPageSizeChange() {\n      this.updateJobPagination();\n    }\n    getJobRangeStart() {\n      return this.filteredJobs.length ? (this.jobPage - 1) * this.pageSize + 1 : 0;\n    }\n    getJobRangeEnd() {\n      return Math.min(this.jobPage * this.pageSize, this.filteredJobs.length);\n    }\n    statusBadgeClass(status) {\n      switch (status) {\n        case 'Queued':\n          return 'bg-slate-100 text-slate-700';\n        case 'Running':\n          return 'bg-blue-100 text-blue-700';\n        case 'Success':\n          return 'bg-emerald-100 text-emerald-700';\n        case 'Failed':\n          return 'bg-rose-100 text-rose-700';\n        default:\n          return 'bg-slate-100 text-slate-700';\n      }\n    }\n    // Export logs (per job) as CSV\n    exportLogs(job) {\n      if (!job.logs || job.logs.length === 0) return;\n      this.busy = true;\n      this.busyMessage = 'Exporting logs...';\n      setTimeout(() => {\n        const csv = job.logs.map((l, i) => `\"${l.replace(/\"/g, '\"\"')}\"`).join('\\r\\n');\n        const blob = new Blob([csv], {\n          type: 'text/csv;charset=utf-8;'\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `job-${job.id}-logs-${new Date().toISOString().replace(/[:.]/g, '-')}.csv`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n        this.busy = false;\n        this.busyMessage = '';\n        this.showToast('Logs exported successfully');\n      }, 600);\n    }\n    toggleExportMenu(job) {\n      // kept for compatibility if a non-Material menu is used elsewhere\n      this.exportMenuFor = this.exportMenuFor === job.id ? null : job.id;\n    }\n    // Export report in several formats (client-side stubs)\n    exportReport(job, fmt) {\n      if (!job.results || job.results.length === 0) return;\n      this.exportMenuFor = null;\n      this.busy = true;\n      this.busyMessage = 'Exporting report...';\n      setTimeout(() => {\n        if (fmt === 'json') {\n          const blob = new Blob([JSON.stringify(job.results, null, 2)], {\n            type: 'application/json'\n          });\n          this.triggerDownload(blob, `job-${job.id}-report-${this.tsStamp()}.json`);\n        } else if (fmt === 'csv') {\n          // Simple CSV: flatten result keys\n          const keys = Object.keys(job.results[0] || {});\n          const lines = [keys.join(',')].concat(job.results.map(r => keys.map(k => `\"${String(r[k] || '').replace(/\"/g, '\"\"')}\"`).join(',')));\n          const blob = new Blob([lines.join('\\r\\n')], {\n            type: 'text/csv'\n          });\n          this.triggerDownload(blob, `job-${job.id}-report-${this.tsStamp()}.csv`);\n        } else if (fmt === 'excel') {\n          // For simplicity create a CSV but with .xlsx extension — note: real Excel/XLSX requires a library\n          const keys = Object.keys(job.results[0] || {});\n          const lines = [keys.join(',')].concat(job.results.map(r => keys.map(k => `\"${String(r[k] || '').replace(/\"/g, '\"\"')}\"`).join(',')));\n          const blob = new Blob([lines.join('\\r\\n')], {\n            type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n          });\n          this.triggerDownload(blob, `job-${job.id}-report-${this.tsStamp()}.xlsx`);\n        } else if (fmt === 'xaml') {\n          const xml = `<Results>${job.results.map(r => `<Item>${Object.keys(r).map(k => `<${k}>${String(r[k] || '')}</${k}>`).join('')}</Item>`).join('')}</Results>`;\n          const blob = new Blob([xml], {\n            type: 'application/xml'\n          });\n          this.triggerDownload(blob, `job-${job.id}-report-${this.tsStamp()}.xaml`);\n        }\n        this.busy = false;\n        this.busyMessage = '';\n        // use MatSnackBar if available\n        try {\n          this.snackBar?.open('Report exported successfully', undefined, {\n            duration: 2500\n          });\n        } catch (e) {\n          this.showToast('Report exported successfully');\n        }\n      }, 900);\n    }\n    triggerDownload(blob, filename) {\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    }\n    tsStamp() {\n      return new Date().toISOString().replace(/[:.]/g, '-');\n    }\n    showToast(msg) {\n      this.toastMessage = msg;\n      setTimeout(() => this.toastMessage = '', 2500);\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function SchedulingJobLogsComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || SchedulingJobLogsComponent)(i0.ɵɵdirectiveInject(i1.MatSnackBar));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SchedulingJobLogsComponent,\n      selectors: [[\"scheduling-job-logs\"]],\n      decls: 25,\n      vars: 18,\n      consts: [[\"menu\", \"matMenu\"], [\"id\", \"scheduling-job-logs\", \"aria-labelledby\", \"sched-title\", 1, \"view\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-4\"], [\"id\", \"sched-title\", 1, \"text-2xl\", \"font-bold\"], [1, \"mb-4\"], [1, \"flex\", \"items-center\", \"gap-2\", \"overflow-x-auto\"], [1, \"px-3\", \"py-2\", \"rounded-t-md\", \"text-slate-700\", \"hover:bg-slate-50\", 3, \"click\"], [1, \"ml-auto\", \"md:hidden\"], [1, \"px-2\", \"py-1\", \"border\", \"rounded\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"jobs\"], [\"value\", \"schedule\"], [\"value\", \"output\"], [4, \"ngIf\"], [\"class\", \"fixed bottom-4 right-4 bg-slate-800 text-white px-4 py-2 rounded shadow\", 4, \"ngIf\"], [\"class\", \"fixed bottom-4 left-4 bg-white border rounded px-3 py-2 shadow inline-flex items-center gap-2\", 4, \"ngIf\"], [1, \"flex\", \"flex-col\", \"md:flex-row\", \"md:items-center\", \"md:justify-between\", \"gap-3\", \"mb-3\"], [1, \"flex\", \"items-center\", \"gap-2\"], [\"type\", \"text\", \"placeholder\", \"Search jobs\", 1, \"px-3\", \"py-2\", \"border\", \"rounded\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"px-3\", \"py-2\", \"border\", \"rounded\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"Queued\"], [\"value\", \"Running\"], [\"value\", \"Success\"], [\"value\", \"Failed\"], [1, \"text-sm\", \"text-slate-600\"], [1, \"px-2\", \"py-1\", \"border\", \"rounded\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [3, \"value\"], [1, \"overflow-x-auto\", \"bg-white\", \"rounded-xl\", \"border\", \"border-slate-200\"], [1, \"w-full\", \"text-sm\"], [1, \"bg-slate-50\"], [1, \"text-left\", \"px-4\", \"py-3\", \"cursor-pointer\", 3, \"click\"], [1, \"text-left\", \"px-4\", \"py-3\"], [4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mt-3\"], [1, \"px-2\", \"py-1\", \"border\", \"rounded\", 3, \"click\", \"disabled\"], [\"class\", \"px-2 py-1 border rounded\", 3, \"font-bold\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"px-4\", \"py-3\"], [1, \"px-2\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-medium\", 3, \"ngClass\"], [1, \"px-2\", \"py-1\", \"border\", \"rounded\", \"bg-white\", \"hover:bg-slate-50\", 3, \"click\", \"disabled\"], [\"mat-button\", \"\", 3, \"matMenuTriggerFor\", \"disabled\"], [\"mat-menu-item\", \"\", 3, \"click\", \"disabled\"], [\"colspan\", \"6\", 1, \"px-4\", \"py-6\", \"text-center\", \"text-slate-500\"], [1, \"px-2\", \"py-1\", \"border\", \"rounded\", 3, \"click\"], [1, \"fixed\", \"bottom-4\", \"right-4\", \"bg-slate-800\", \"text-white\", \"px-4\", \"py-2\", \"rounded\", \"shadow\"], [1, \"fixed\", \"bottom-4\", \"left-4\", \"bg-white\", \"border\", \"rounded\", \"px-3\", \"py-2\", \"shadow\", \"inline-flex\", \"items-center\", \"gap-2\"], [\"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\", \"animate-spin\", \"text-slate-600\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\", \"stroke-width\", \"3\", \"stroke\", \"currentColor\", \"fill\", \"none\", \"opacity\", \"0.25\"], [1, \"text-sm\", \"text-slate-700\"]],\n      template: function SchedulingJobLogsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"section\", 1)(1, \"div\", 2)(2, \"h1\", 3);\n          i0.ɵɵtext(3, \"Job Management\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 4)(5, \"nav\", 5)(6, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_Template_button_click_6_listener() {\n            return ctx.activateTab(\"jobs\");\n          });\n          i0.ɵɵtext(7, \"Jobs\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_Template_button_click_8_listener() {\n            return ctx.activateTab(\"schedule\");\n          });\n          i0.ɵɵtext(9, \"Schedule\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function SchedulingJobLogsComponent_Template_button_click_10_listener() {\n            return ctx.activateTab(\"output\");\n          });\n          i0.ɵɵtext(11, \"Output\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 7)(13, \"select\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function SchedulingJobLogsComponent_Template_select_ngModelChange_13_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.activeTab, $event) || (ctx.activeTab = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(14, \"option\", 9);\n          i0.ɵɵtext(15, \"Jobs\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"option\", 10);\n          i0.ɵɵtext(17, \"Schedule\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"option\", 11);\n          i0.ɵɵtext(19, \"Output\");\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵtemplate(20, SchedulingJobLogsComponent_div_20_Template, 56, 17, \"div\", 12)(21, SchedulingJobLogsComponent_div_21_Template, 2, 0, \"div\", 12)(22, SchedulingJobLogsComponent_div_22_Template, 2, 0, \"div\", 12)(23, SchedulingJobLogsComponent_div_23_Template, 2, 1, \"div\", 13)(24, SchedulingJobLogsComponent_div_24_Template, 5, 1, \"div\", 14);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"font-semibold\", ctx.activeTab === \"jobs\")(\"border-b-2\", ctx.activeTab === \"jobs\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"font-semibold\", ctx.activeTab === \"schedule\")(\"border-b-2\", ctx.activeTab === \"schedule\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"font-semibold\", ctx.activeTab === \"output\")(\"border-b-2\", ctx.activeTab === \"output\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.activeTab);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"jobs\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"schedule\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"output\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.toastMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.busy);\n        }\n      },\n      dependencies: [CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf, FormsModule, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, ScheduleComponent, OutputComponent, MatMenuModule, i4.MatMenu, i4.MatMenuItem, i4.MatMenuTrigger, MatButtonModule, i5.MatButton, MatIconModule, i2.DatePipe],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return SchedulingJobLogsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}