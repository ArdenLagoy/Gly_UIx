{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Chart, registerables, ChartOptions } from 'chart.js';\nimport { BaseChartDirective } from 'ng2-charts';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nfunction SummaryComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"input\", 39);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function SummaryComponent_div_21_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.customFrom, $event) || (ctx_r1.customFrom = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\", 16);\n    i0.ɵɵtext(3, \"to\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 40);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function SummaryComponent_div_21_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.customTo, $event) || (ctx_r1.customTo = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.customFrom);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.customTo);\n  }\n}\nfunction SummaryComponent_li_92_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 41)(1, \"div\")(2, \"div\", 42);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 43);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 44)(7, \"div\", 45);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 43);\n    i0.ɵɵtext(11, \"docs processed\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(p_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r3.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 3, p_r3.docs));\n  }\n}\nChart.register(...registerables);\nexport let SummaryComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class SummaryComponent {\n    constructor() {\n      // demo KPI numbers\n      this.kpi = {\n        docsProcessed: 45230,\n        accuracy: 0.945,\n        failures: 312,\n        failRate: 312 / 45230,\n        avgHandleTime: 42,\n        // seconds\n        slaBreach: 8\n      };\n      this.ahtUnit = 's';\n      // Date range filter state\n      this.selectedRange = 'all';\n      this.customFrom = null; // yyyy-mm-dd\n      this.customTo = null;\n      // demo timeseries for throughput / aht\n      this.throughput = [1800, 2100, 1950, 2300, 2450, 1300, 980];\n      this.throughputLabels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n      this.ahtSeries = [40, 42, 41, 39, 45, 50, 44];\n      // demo type mix\n      this.typeMix = [54, 18, 14, 8, 6];\n      this.typeLabels = ['Invoices', 'POs', 'Receipts', 'Waybills', 'Others'];\n      // demo project accuracy\n      this.projectAccuracy = [96.4, 94.1, 91.2, 95.3, 92.7];\n      this.projectLabels = ['Invoice DU', 'PO Extractor', 'Receipt Classifier', 'Waybill Parser', 'BOL Validator'];\n      // top projects (sorted by docs)\n      this.topProjects = [{\n        id: 'PX-001',\n        name: 'Invoice DU',\n        docs: 12840\n      }, {\n        id: 'PX-002',\n        name: 'PO Extractor',\n        docs: 8340\n      }, {\n        id: 'PX-004',\n        name: 'Waybill Parser',\n        docs: 6880\n      }, {\n        id: 'PX-005',\n        name: 'BOL Validator',\n        docs: 3020\n      }, {\n        id: 'PX-003',\n        name: 'Receipt Classifier',\n        docs: 2451\n      }];\n      this.throughputOptions = {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: false\n          }\n        }\n      };\n      this.typeMixOptions = {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: 'right'\n          }\n        }\n      };\n      this.projectAccuracyOptions = {\n        responsive: true,\n        maintainAspectRatio: false,\n        scales: {\n          y: {\n            beginAtZero: true,\n            max: 100\n          }\n        },\n        plugins: {\n          legend: {\n            display: false\n          }\n        }\n      };\n      this.ahtOptions = {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: false\n          }\n        }\n      };\n    }\n    // Helper to compute the active date range (for later filtering)\n    get activeRange() {\n      if (this.selectedRange === 'all') return null;\n      if (this.selectedRange === 'custom') {\n        return {\n          from: this.customFrom ?? undefined,\n          to: this.customTo ?? undefined\n        };\n      }\n      const days = parseInt(this.selectedRange, 10);\n      if (isNaN(days)) return null;\n      const to = new Date();\n      const from = new Date();\n      from.setDate(to.getDate() - days + 1);\n      const fmt = d => d.toISOString().slice(0, 10);\n      return {\n        from: fmt(from),\n        to: fmt(to)\n      };\n    }\n    // Chart getters\n    get throughputData() {\n      const days = this.getVisibleDays();\n      let labels = this.throughputLabels.slice();\n      let data = this.throughput.slice();\n      if (days !== null) {\n        if (days < labels.length) {\n          labels = labels.slice(-days);\n          data = data.slice(-days);\n        }\n      }\n      return {\n        labels,\n        datasets: [{\n          label: 'Docs',\n          data,\n          borderColor: '#3b82f6',\n          backgroundColor: 'rgba(59,130,246,0.12)',\n          tension: 0.3\n        }]\n      };\n    }\n    get typeMixData() {\n      return {\n        labels: this.typeLabels,\n        datasets: [{\n          data: this.typeMix,\n          backgroundColor: ['#0ea5e9', '#22c55e', '#f59e0b', '#8b5cf6', '#ef4444']\n        }]\n      };\n    }\n    get projectAccuracyData() {\n      return {\n        labels: this.projectLabels,\n        datasets: [{\n          label: 'Accuracy %',\n          data: this.projectAccuracy,\n          backgroundColor: '#10b981'\n        }]\n      };\n    }\n    get ahtData() {\n      const factor = this.ahtUnit === 's' ? 1 : this.ahtUnit === 'm' ? 1 / 60 : 1 / 3600;\n      const days = this.getVisibleDays();\n      let labels = this.throughputLabels.slice();\n      let series = this.ahtSeries.slice();\n      if (days !== null) {\n        if (days < labels.length) {\n          labels = labels.slice(-days);\n          series = series.slice(-days);\n        }\n      }\n      const data = series.map(v => +(v * factor).toFixed(2));\n      return {\n        labels,\n        datasets: [{\n          label: 'Avg Handle Time',\n          data,\n          borderColor: '#f59e0b',\n          backgroundColor: 'rgba(245,158,11,0.12)',\n          tension: 0.3\n        }]\n      };\n    }\n    // Compute visible days based on selection; null means 'all' (no slicing)\n    getVisibleDays() {\n      if (this.selectedRange === 'all') return null;\n      if (this.selectedRange === 'custom') {\n        if (this.customFrom && this.customTo) {\n          const from = new Date(this.customFrom);\n          const to = new Date(this.customTo);\n          if (isNaN(from.getTime()) || isNaN(to.getTime())) return null;\n          const diff = Math.max(1, Math.ceil((to.getTime() - from.getTime()) / (24 * 3600 * 1000)) + 1);\n          return Math.min(diff, this.throughputLabels.length);\n        }\n        return null;\n      }\n      const days = parseInt(this.selectedRange, 10);\n      if (isNaN(days)) return null;\n      return Math.min(days, this.throughputLabels.length);\n    }\n    // KPIs mapped to visible range\n    get visibleDocsProcessed() {\n      const days = this.getVisibleDays();\n      if (days === null) return this.kpi.docsProcessed;\n      // assume kpi.docsProcessed is ~30-day total; scale proportionally\n      const scaled = Math.round(this.kpi.docsProcessed * days / 30);\n      return Math.max(0, scaled);\n    }\n    get visibleAvgHandleTime() {\n      const days = this.getVisibleDays();\n      let series = this.ahtSeries.slice();\n      if (days !== null && days < series.length) series = series.slice(-days);\n      const avg = series.reduce((s, v) => s + v, 0) / Math.max(1, series.length);\n      return Math.round(avg);\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function SummaryComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || SummaryComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SummaryComponent,\n      selectors: [[\"summary-page\"]],\n      decls: 93,\n      vars: 33,\n      consts: [[\"id\", \"summary\", \"aria-labelledby\", \"summary-title\", 1, \"view\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-4\"], [\"id\", \"summary-title\", 1, \"text-2xl\", \"font-bold\"], [1, \"mb-4\"], [\"for\", \"summary-range\", 1, \"sr-only\"], [1, \"flex\", \"items-center\", \"space-x-3\"], [\"id\", \"summary-range\", 1, \"px-3\", \"py-2\", \"border\", \"rounded\", \"bg-white\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"all\"], [\"value\", \"1\"], [\"value\", \"30\"], [\"value\", \"60\"], [\"value\", \"90\"], [\"value\", \"custom\"], [\"class\", \"flex items-center space-x-2\", 4, \"ngIf\"], [1, \"grid\", \"grid-cols-2\", \"md:grid-cols-6\", \"gap-4\", \"mb-6\"], [1, \"rounded-2xl\", \"bg-white\", \"p-4\", \"text-center\"], [1, \"text-sm\", \"text-slate-500\"], [1, \"text-2xl\", \"font-semibold\"], [1, \"text-2xl\", \"font-semibold\", \"text-rose-600\"], [1, \"text-2xl\", \"font-semibold\", \"text-amber-600\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-3\", \"gap-4\", \"mb-6\"], [1, \"rounded-2xl\", \"bg-white\", \"p-4\"], [1, \"font-semibold\", \"mb-2\"], [1, \"h-48\", \"border\", \"rounded-md\", \"p-3\"], [\"baseChart\", \"\", 2, \"width\", \"100%\", \"height\", \"100%\", \"display\", \"block\", 3, \"data\", \"options\", \"type\"], [1, \"h-48\", \"border\", \"rounded-md\", \"p-3\", \"flex\", \"items-center\", \"justify-center\"], [\"baseChart\", \"\", 2, \"width\", \"220px\", \"height\", \"220px\", \"display\", \"block\", 3, \"data\", \"options\", \"type\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-2\", \"gap-4\", \"mb-6\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-2\"], [1, \"font-semibold\"], [1, \"px-2\", \"py-1\", \"border\", \"rounded\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"s\"], [\"value\", \"m\"], [\"value\", \"h\"], [1, \"h-56\", \"border\", \"rounded-md\", \"p-3\"], [1, \"overflow-auto\"], [1, \"space-y-2\"], [\"class\", \"flex items-center justify-between p-3 bg-slate-50 rounded-lg\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"items-center\", \"space-x-2\"], [\"type\", \"date\", \"aria-label\", \"From date\", 1, \"px-2\", \"py-1\", \"border\", \"rounded\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"date\", \"aria-label\", \"To date\", 1, \"px-2\", \"py-1\", \"border\", \"rounded\", 3, \"ngModelChange\", \"ngModel\"], [1, \"flex\", \"items-center\", \"justify-between\", \"p-3\", \"bg-slate-50\", \"rounded-lg\"], [1, \"font-medium\"], [1, \"text-xs\", \"text-slate-500\"], [1, \"text-right\"], [1, \"text-sm\"]],\n      template: function SummaryComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n          i0.ɵɵtext(3, \"Summary\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"label\", 4);\n          i0.ɵɵtext(6, \"Date range\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"select\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function SummaryComponent_Template_select_ngModelChange_8_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.selectedRange, $event) || (ctx.selectedRange = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(9, \"option\", 7);\n          i0.ɵɵtext(10, \"All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"option\", 8);\n          i0.ɵɵtext(12, \"Last 1 day\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"option\", 9);\n          i0.ɵɵtext(14, \"Last 30 days\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"option\", 10);\n          i0.ɵɵtext(16, \"Last 60 days\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"option\", 11);\n          i0.ɵɵtext(18, \"Last 90 days\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"option\", 12);\n          i0.ɵɵtext(20, \"Custom range\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(21, SummaryComponent_div_21_Template, 5, 2, \"div\", 13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 14)(23, \"div\", 15)(24, \"div\", 16);\n          i0.ɵɵtext(25, \"Docs Processed\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"div\", 17);\n          i0.ɵɵtext(27);\n          i0.ɵɵpipe(28, \"number\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"div\", 15)(30, \"div\", 16);\n          i0.ɵɵtext(31, \"Accuracy\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"div\", 17);\n          i0.ɵɵtext(33);\n          i0.ɵɵpipe(34, \"number\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(35, \"div\", 15)(36, \"div\", 16);\n          i0.ɵɵtext(37, \"Failures\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"div\", 18);\n          i0.ɵɵtext(39);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(40, \"div\", 15)(41, \"div\", 16);\n          i0.ɵɵtext(42, \"Fail Rate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(43, \"div\", 18);\n          i0.ɵɵtext(44);\n          i0.ɵɵpipe(45, \"number\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(46, \"div\", 15)(47, \"div\", 16);\n          i0.ɵɵtext(48, \"Avg Handle Time\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"div\", 17);\n          i0.ɵɵtext(50);\n          i0.ɵɵpipe(51, \"number\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(52, \"div\", 15)(53, \"div\", 16);\n          i0.ɵɵtext(54, \"SLA Breach\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(55, \"div\", 19);\n          i0.ɵɵtext(56);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(57, \"div\", 20)(58, \"div\", 21)(59, \"h3\", 22);\n          i0.ɵɵtext(60, \"Throughput\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"div\", 23);\n          i0.ɵɵelement(62, \"canvas\", 24);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(63, \"div\", 21)(64, \"h3\", 22);\n          i0.ɵɵtext(65, \"Document Type Mix\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(66, \"div\", 25);\n          i0.ɵɵelement(67, \"canvas\", 26);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(68, \"div\", 21)(69, \"h3\", 22);\n          i0.ɵɵtext(70, \"Project Accuracy\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(71, \"div\", 23);\n          i0.ɵɵelement(72, \"canvas\", 24);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(73, \"div\", 27)(74, \"div\", 21)(75, \"div\", 28)(76, \"h3\", 29);\n          i0.ɵɵtext(77, \"Average Handle Time\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(78, \"select\", 30);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function SummaryComponent_Template_select_ngModelChange_78_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.ahtUnit, $event) || (ctx.ahtUnit = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(79, \"option\", 31);\n          i0.ɵɵtext(80, \"Seconds\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(81, \"option\", 32);\n          i0.ɵɵtext(82, \"Minutes\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(83, \"option\", 33);\n          i0.ɵɵtext(84, \"Hours\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(85, \"div\", 34);\n          i0.ɵɵelement(86, \"canvas\", 24);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(87, \"div\", 21)(88, \"h3\", 22);\n          i0.ɵɵtext(89, \"Top Projects\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(90, \"div\", 35)(91, \"ul\", 36);\n          i0.ɵɵtemplate(92, SummaryComponent_li_92_Template, 12, 5, \"li\", 37);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedRange);\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedRange === \"custom\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(28, 22, ctx.visibleDocsProcessed));\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(34, 24, ctx.kpi.accuracy * 100, \"1.1-1\"), \"%\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(ctx.kpi.failures);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(45, 27, ctx.kpi.failRate * 100, \"1.1-1\"), \"%\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(51, 30, ctx.visibleAvgHandleTime, \"1.0-0\"), \"s\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(ctx.kpi.slaBreach);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"data\", ctx.throughputData)(\"options\", ctx.throughputOptions)(\"type\", \"line\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"data\", ctx.typeMixData)(\"options\", ctx.typeMixOptions)(\"type\", \"pie\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"data\", ctx.projectAccuracyData)(\"options\", ctx.projectAccuracyOptions)(\"type\", \"bar\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.ahtUnit);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"data\", ctx.ahtData)(\"options\", ctx.ahtOptions)(\"type\", \"line\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngForOf\", ctx.topProjects);\n        }\n      },\n      dependencies: [CommonModule, i1.NgForOf, i1.NgIf, BaseChartDirective, FormsModule, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel, i1.DecimalPipe],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return SummaryComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}